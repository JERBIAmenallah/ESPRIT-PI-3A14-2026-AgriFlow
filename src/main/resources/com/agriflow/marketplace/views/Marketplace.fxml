<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<!--
    AgriFlow - Marketplace de Location
    Interface principale pour la gestion des Ã©quipements agricoles
    
    @author AgriFlow Team
    @version 1.0
-->
<BorderPane xmlns="http://javafx.com/javafx/21" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.agriflow.marketplace.controllers.MarketplaceController"
            stylesheets="@styles.css">

    <!-- ================================================================= -->
    <!-- En-tÃªte de l'application                                         -->
    <!-- ================================================================= -->
    <top>
        <VBox styleClass="header" spacing="5">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            <Text text="ðŸšœ AgriFlow Marketplace" styleClass="title"/>
            <Text text="Location de matÃ©riel agricole entre agriculteurs" styleClass="subtitle"/>
        </VBox>
    </top>

    <!-- ================================================================= -->
    <!-- Zone principale avec TableView et Formulaire                      -->
    <!-- ================================================================= -->
    <center>
        <HBox spacing="20">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <!-- Liste des Ã©quipements (TableView) -->
            <VBox HBox.hgrow="ALWAYS" spacing="10">
                <Label text="ðŸ“‹ Liste des Ã©quipements disponibles" styleClass="section-title"/>
                
                <TableView fx:id="tableEquipements" VBox.vgrow="ALWAYS" styleClass="equipment-table">
                    <columns>
                        <TableColumn fx:id="colId" text="ID" prefWidth="50"/>
                        <TableColumn fx:id="colNom" text="Nom" prefWidth="180"/>
                        <TableColumn fx:id="colType" text="Type" prefWidth="120"/>
                        <TableColumn fx:id="colPrix" text="Prix/Jour (â‚¬)" prefWidth="100"/>
                        <TableColumn fx:id="colDisponibilite" text="Disponible" prefWidth="90"/>
                        <TableColumn fx:id="colAgriculteur" text="PropriÃ©taire" prefWidth="100"/>
                    </columns>
                    <placeholder>
                        <Label text="Aucun Ã©quipement trouvÃ©"/>
                    </placeholder>
                </TableView>
                
                <!-- Boutons d'action pour la liste -->
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button fx:id="btnRefresh" text="ðŸ”„ Actualiser" onAction="#handleRefresh" styleClass="btn-secondary"/>
                    <Button fx:id="btnDelete" text="ðŸ—‘ï¸ Supprimer" onAction="#handleDelete" styleClass="btn-danger"/>
                </HBox>
            </VBox>
            
            <!-- Formulaire d'ajout/modification -->
            <VBox spacing="15" styleClass="form-container" minWidth="300">
                <Label text="âž• Ajouter un Ã©quipement" styleClass="section-title"/>
                
                <!-- Champ Nom -->
                <VBox spacing="5">
                    <Label text="Nom de l'Ã©quipement:" styleClass="form-label"/>
                    <TextField fx:id="txtNom" promptText="Ex: Tracteur John Deere"/>
                </VBox>
                
                <!-- Champ Type -->
                <VBox spacing="5">
                    <Label text="Type de matÃ©riel:" styleClass="form-label"/>
                    <ComboBox fx:id="comboType" promptText="SÃ©lectionnez un type" maxWidth="Infinity">
                        <items>
                            <javafx.collections.FXCollections fx:factory="observableArrayList">
                                <String fx:value="Tracteur"/>
                                <String fx:value="Moissonneuse"/>
                                <String fx:value="Semoir"/>
                                <String fx:value="PulvÃ©risateur"/>
                                <String fx:value="Remorque"/>
                                <String fx:value="Charrue"/>
                                <String fx:value="Faucheuse"/>
                                <String fx:value="Autre"/>
                            </javafx.collections.FXCollections>
                        </items>
                    </ComboBox>
                </VBox>
                
                <!-- Champ Prix -->
                <VBox spacing="5">
                    <Label text="Prix de location (â‚¬/jour):" styleClass="form-label"/>
                    <TextField fx:id="txtPrix" promptText="Ex: 150.00"/>
                </VBox>
                
                <!-- Champ DisponibilitÃ© -->
                <VBox spacing="5">
                    <Label text="DisponibilitÃ©:" styleClass="form-label"/>
                    <CheckBox fx:id="checkDisponible" text="Ã‰quipement disponible Ã  la location" selected="true"/>
                </VBox>
                
                <!-- Champ ID Agriculteur -->
                <VBox spacing="5">
                    <Label text="ID PropriÃ©taire (Agriculteur):" styleClass="form-label"/>
                    <TextField fx:id="txtAgriculteur" promptText="Ex: 1"/>
                </VBox>
                
                <!-- Boutons du formulaire -->
                <HBox spacing="10" alignment="CENTER">
                    <Button fx:id="btnAjouter" text="âœ… Ajouter" onAction="#handleAjouter" styleClass="btn-primary"/>
                    <Button fx:id="btnModifier" text="âœï¸ Modifier" onAction="#handleModifier" styleClass="btn-warning"/>
                    <Button fx:id="btnClear" text="ðŸ§¹ Effacer" onAction="#handleClear" styleClass="btn-secondary"/>
                </HBox>
                
                <!-- Zone de message -->
                <Label fx:id="lblMessage" styleClass="message-label" wrapText="true"/>
            </VBox>
        </HBox>
    </center>

    <!-- ================================================================= -->
    <!-- Pied de page                                                      -->
    <!-- ================================================================= -->
    <bottom>
        <HBox styleClass="footer" alignment="CENTER">
            <padding>
                <Insets top="10" right="20" bottom="10" left="20"/>
            </padding>
            <Label text="Â© 2026 AgriFlow - Module Marketplace de Location"/>
        </HBox>
    </bottom>

</BorderPane>
